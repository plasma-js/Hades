!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b(require("yup")):"function"==typeof define&&define.amd?define(["yup"],b):a.index=b(a.yup)}(this,function(b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function g(a){if(c(this,g),!a)throw new Error("The second param 'fields' is obrigatory!");this.data=[],this.fields=a,this.model=function(a){var b=[];return Array.isArray(a)?(b.array=null,b.of=k(a)):(b.object=null,b.shape=k(a)),b}(this.fields),console.log(this.fields),console.log(this.model)}function e(){c(this,e)}function f(a){c(this,f),this.collections=new i,this.events=[],this.history=[],this.getters=[],a&&"function"==typeof a&&a.bind(this)}var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},j=function(a,b,c){return b&&d(a.prototype,b),c&&d(a,c),a},k=function a(b){return"object"!==(void 0===b?"undefined":h(b))&&"array"!=typeof b||("object"===(void 0===b?"undefined":h(b))?Object:Array).keys(b).forEach(function(c){if("object"===h(b[c])||"array"==typeof b[c]){var d=b[c],e=Array.isArray(d)?"array":"object",f="array"==e?"of":"shape";b[c]=[],b[c][e]=null,b[c][f]=a(d)}else b[c]=function(a){var b=[];return a.split("|").forEach(function(a){var c=a.split("(")[1]?a.split("(")[1].split(")")[0]:null;b[c?a.split("(")[0]:a]=c}),b}(b[c])}),b},l=(j(g,[{key:"runner",value:function(a){var c=this,d=b;return Object.keys(a).forEach(function(b){var e=a[b];d=d[b].call(c,e)}),d}},{key:"mapEntries",value:function(a){var b={};return Object.keys(a).forEach(function(c){b[c]=a[c]}),b}}]),g),i=(j(e,[{key:"new",value:function(a,b){if(this[a])throw new Error("Collection '"+a+"' already exists!");this[a]=new l(b)}},{key:"remove",value:function(a){if(!this[a])throw new Error("Collection '"+a+"' not found!");this[a]=null,delete this[a]}}]),e);return j(f,[{key:"publish",value:function(a,b){var c=this,d=1<arguments.length&&void 0!==b?b:null,e=this.events[a];if(!e||!e.length)throw new Error("Event called before one handler definition.");e.forEach(function(a){a.bind(c,d)})}},{key:"subscribe",value:function(a,b){if(!a||"string"!=typeof a)throw new Error("The first param is empty or invalid.");if(this.events[a]||(this.events[a]=[]),!b||"function"!=typeof b)throw new Error("The second param is required and should be a function!");this.events[a].push(b)}}]),f});
