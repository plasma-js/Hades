!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b(require("yup")):"function"==typeof define&&define.amd?define(["yup"],b):a.index=b(a.yup)}(this,function(){"use strict";function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function d(a){if(b(this,d),!a)throw new Error("The second param 'fields' is obrigatory!");this.data=[],this.fields=a,this.model=function(a){var b=[];return Array.isArray(a)?(b.array=null,b.of=j(a)):(b.object=null,b.shape=j(a)),b}(this.fields),console.log(this.fields),console.log(this.model)}function e(){b(this,e)}function f(a){b(this,f),this.collections=new i,this.events=[],this.history=[],this.getters=[],a&&"function"==typeof a&&a.bind(this)}var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},h=function(a,b,d){return b&&c(a.prototype,b),d&&c(a,d),a},j=function a(b){return"object"!==(void 0===b?"undefined":g(b))&&"array"!=typeof b||("object"===(void 0===b?"undefined":g(b))?Object:Array).keys(b).forEach(function(c){if("object"===g(b[c])||"array"==typeof b[c]){var d=b[c],e=Array.isArray(d)?"array":"object",f="array"==e?"of":"shape";b[c]=[],b[c][e]=null,b[c][f]=a(d)}else b[c]=function(a){var b=[];return a.split("|").forEach(function(a){var c=a.split("(")[1]?a.split("(")[1].split(")")[0]:null;b[c?a.split("(")[0]:a]=c}),b}(b[c])}),b},k=(h(d,[{key:"mapSchema",value:function(a){return a.forEach(function(){})}}]),d),i=(h(e,[{key:"new",value:function(a,b){if(this[a])throw new Error("Collection '"+a+"' already exists!");this[a]=new k(b)}},{key:"remove",value:function(a){if(!this[a])throw new Error("Collection '"+a+"' not found!");this[a]=null,delete this[a]}}]),e);return h(f,[{key:"publish",value:function(a,b){var c=this,d=1<arguments.length&&void 0!==b?b:null,e=this.events[a];if(!e||!e.length)throw new Error("Event called before one handler definition.");e.forEach(function(a){a.bind(c,d)})}},{key:"subscribe",value:function(a,b){if(!a||"string"!=typeof a)throw new Error("The first param is empty or invalid.");if(this.events[a]||(this.events[a]=[]),!b||"function"!=typeof b)throw new Error("The second param is required and should be a function!");this.events[a].push(b)}}]),f});
